/**
 * Javascript change opaque question focus.
 *
 * @copyright 2017 The Open University
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @since     3.2
 */
define("qtype_opaque/changefocus",["jquery"],(function($){var t={init:function(){$(document).ready((function(){var checkButton=$('input[id*="_omact_gen_"]'),opaqueTryAgainButton=$('input[id*="omact_ok"]'),lastindex=localStorage.getItem("last_question_index");localStorage.removeItem("last_question_index"),null!==lastindex&&setTimeout((function(){$("html, body").animate({scrollTop:$("#q"+lastindex).offset().top},100);var focusTryAgainButton=$('input[id*=":'+lastindex+'_omact_ok"]');$(focusTryAgainButton).length>0?$(focusTryAgainButton).focus():$('input[id*="_omact_ok"]').blur()}),350),opaqueTryAgainButton.on("keydown",(function(e){var keyCode=e.keyCode||e.which;if(e.preventDefault(),9==keyCode&&!e.shiftKey){var slot=t.getQuestionIndex(e);$("#q"+slot+" input.questionflagimage").focus(),$(this).attr("tabindex",-1)}})),$(checkButton).click((function(e){localStorage.setItem("last_question_index",t.getQuestionIndex(e))})),$(opaqueTryAgainButton).click((function(e){localStorage.setItem("last_question_index",t.getQuestionIndex(e))}))}))},getQuestionIndex:function(e){var str=e.target.id,questionindex=str.substr(str.indexOf(":")+1);return questionindex=questionindex.substr(0,questionindex.indexOf("_"))}};return t}));

//# sourceMappingURL=changefocus.min.js.map